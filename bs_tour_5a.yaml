id: bs_tour_5a
name: 'BS-Seq analysis'
description: 'Quantification of methylated reads within a CpG context using Samtools, MethylDackel, and Bedtools'
title_default: 'BS-Seq analysis'
steps:
  - title: '<b>Outline</b>'
    element: '#masthead'
    content: 'In this tour we will infer genome-wide methylation rates in a CpG context.<br />Here, we will leverage on two tools: <b>Samtools</b>, to extract uniquely mapped and properly paired sequences from aligned input data, and <b>MethylDackel</b> to quantify the methylated reads of the provided CpG context file of gene upstream regions.<br />'
    placement: bottom



# filter alignment



  - title: '<b>Extract properly paired sequences</b>'
    element: '#tool-search-query'
    content: 'Look for <b>Filter SAM or BAM by Samtools</b>.<br /><br />
Click <b>Next</b> to load it.<br />'
    placement: right
    textinsert: filter sam or bam
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtool_filter2%2Fsamtool_filter2%2F1.8%2Bgalaxy1"]

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="input1"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>mapped.ctr</b></text>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="mapq"]'
    placement: top
    content: 'To mask uniquely mapped reads, mapping tools usually assign mapping qualities greater 0 except e.g. STAR (255). <br /><text style="color:red">Enter: <b>1</b></text>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="flag|filter"]'
    placement: top
    content: '<text style="color:red">Select: <b>yes</b></text>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="flag|reqBits"]'
    content: 'Since input data is paired-end, select read mapped in a proper pair.'
    placement: top
    select:
      - 'div[tour_id="flag|reqBits"] > .ui-form-field > div > .ui-options > .ui-options-list > :nth-child(2) > input'

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="flag|skipBits"]'
    content: 'Optionally skip reads which were not aligned or flagged as secondary, supplementary respectively.'
    placement: top
    select:
      - 'div[tour_id="flag|skipBits"] > .ui-form-field > div > .ui-options > .ui-options-list > :nth-child(3) > input'
      - 'div[tour_id="flag|skipBits"] > .ui-form-field > div > .ui-options > .ui-options-list > :nth-child(9) > input'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#execute'
    content: 'For all remaining parametrization options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#right'
    content: 'Samtools filter processing has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Filter SAM or BAM")'



# redo for treat


  - title: '<b>Extract properly paired sequences</b>'
    element: '#tool-search-query'
    content: 'Meanwhile apply read filter steps for treatment samples, too<br />'
    placement: right
    textinsert: filter sam or bam
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtool_filter2%2Fsamtool_filter2%2F1.8%2Bgalaxy1"]

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="input1"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>mapped.treat</b></text>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="mapq"]'
    placement: top
    content: 'To mask uniquely mapped reads, mapping tools usually assign mapping qualities greater 0 except e.g. STAR (255). <br /><text style="color:red">Enter: <b>1</b></text>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="flag|filter"]'
    placement: top
    content: '<text style="color:red">Select: <b>yes</b></text>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="flag|reqBits"]'
    content: 'Since input data is paired-end, select read mapped in a proper pair.'
    placement: top
    select:
      - 'div[tour_id="flag|reqBits"] > .ui-form-field > div > .ui-options > .ui-options-list > :nth-child(2) > input'

  - title: '<b>Extract properly paired sequences</b>'
    element: 'div[tour_id="flag|skipBits"]'
    content: 'Optionally skip reads which were not aligned or flagged as secondary, supplementary respectively.'
    placement: top
    select:
      - 'div[tour_id="flag|skipBits"] > .ui-form-field > div > .ui-options > .ui-options-list > :nth-child(3) > input'
      - 'div[tour_id="flag|skipBits"] > .ui-form-field > div > .ui-options > .ui-options-list > :nth-child(9) > input'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#execute'
    content: 'For all remaining parametrization options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#right'
    content: 'Samtools filter processing has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Filter SAM or BAM")'



# wait and tag



  - title: '<b>Extract properly paired sequences</b>'
    element: '#masthead'
    content: 'The read filter tasks have been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-queued'
        count: 0

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (1/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>filtered.treat</b></text>'
    placement: top
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (2/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>filtered.ctr</b></text>'
    placement: top
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'



# name sort alignment



  - title: '<b>Sort properly paired sequences</b>'
    element: '#tool-search-query'
    content: 'Look for <b>Samtools sort</b>.<br /><br />'
    placement: right
    textinsert: samtools sort
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtools_sort%2Fsamtools_sort%2F2.0.3"]

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="input1"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>filtered.ctr</b></text>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="prim_key_cond|prim_key_select"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>name (-n)</b></text>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'


  - title: '<b>Sort properly paired sequences</b>'
    element: '#right'
    content: 'Samtools sort processing has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Samtools sort")'



# redo for treat



  - title: '<b>Sort properly paired sequences</b>'
    element: '#tool-search-query'
    content: 'Meanwhile apply Samtools sort on treatment samples<br />'
    placement: right
    textinsert: samtools sort
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtools_sort%2Fsamtools_sort%2F2.0.3"]

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="input1"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>filtered.treat</b></text>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="prim_key_cond|prim_key_select"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>name (-n)</b></text>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'


  - title: '<b>Sort properly paired sequences</b>'
    element: '#right'
    content: 'Samtools sort processing has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Samtools sort")'



# wait and tag



  - title: '<b>Sort properly paired sequences</b>'
    element: '#masthead'
    content: 'Sorting the filtered alignments has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-queued'
        count: 0

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (1/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>namesorted.treat</b></text>'
    placement: top
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (2/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>namesorted.ctr</b></text>'
    placement: top
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'



# fixmate alignment


  - title: '<b>Add tags</b>'
    element: '#tool-search-query'
    content: 'Look for <b>Samtools fixmate</b>.<br /><br />'
    placement: right
    textinsert: samtools fixmate
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fsamtools_fixmate%2Fsamtools_fixmate%2F1.9"]

  - title: '<b>Add tags</b>'
    element: 'div[tour_id="bamfile"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="bamfile"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Add tags</b>'
    element: 'div[tour_id="bamfile"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>namesorted.ctr</b></text>'
    pointer: true

  - title: '<b>Add tags</b>'
    element: 'div[tour_id="addms"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton'
    content: 'Add scores to mate pairs according to their CIGAR strings.<br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="addms"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton > :nth-child(1)'

  - title: '<b>Add tags</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Add tags</b>'
    element: '#right'
    content: 'Adding tags by Samtools fixmate has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Samtools fixmate")'



# redo for treat



  - title: '<b>Add tags</b>'
    element: '#tool-search-query'
    content: 'Meanwhile apply Samtools fixmate on alignments of treatment samples.<br /><br />'
    placement: right
    textinsert: samtools fixmate
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fsamtools_fixmate%2Fsamtools_fixmate%2F1.9"]

  - title: '<b>Add tags</b>'
    element: 'div[tour_id="bamfile"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="bamfile"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Add tags</b>'
    element: 'div[tour_id="bamfile"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>namesorted.treat</b></text>'
    pointer: true

  - title: '<b>Add tags</b>'
    element: 'div[tour_id="addms"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton'
    content: 'Add scores to mate pairs according to their CIGAR strings.<br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="addms"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton > :nth-child(1)'

  - title: '<b>Add tags</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Add tags</b>'
    element: '#right'
    content: 'Adding tags by Samtools fixmate has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Samtools fixmate")'



# wait and tag



  - title: '<b>Add tags</b>'
    element: '#masthead'
    content: 'Adding tags has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-queued'
        count: 0

  - title: '<b>Add tags</b>'
    element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (1/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'

  - title: '<b>Add tags</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>tagged.treat</b></text>'
    placement: top
    pointer: true

  - title: '<b>Add tags</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Add tags</b>'
    element: '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (2/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'

  - title: '<b>Add tags</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>tagged.ctr</b></text>'
    placement: top
    pointer: true

  - title: '<b>Add tags</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'




# markdups


  - title: '<b>Mark duplicates</b>'
    element: '#tool-search-query'
    content: 'To finally, mark PCR or optical duplicates, look for <b>Samtools markdup</b>.<br /><br />'
    placement: right
    textinsert: samtools markdup
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fsamtools_markdup%2Fsamtools_markdup%2F1.9%2Bgalaxy2"]

  - title: '<b>Mark duplicates</b>'
    element: 'div[tour_id="bamfile"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="bamfile"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Mark duplicates</b>'
    element: 'div[tour_id="bamfile"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>tagged.ctr</b></text>'
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: 'div[tour_id="maxlen"]'
    placement: top
    content: 'According to our input dataset<br /><text style="color:red">Enter: <b>100</b></text>'
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Mark duplicates</b>'
    element: '#right'
    content: 'Mark duplicates by Samtools has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Samtools markdup")'



# redo for treat



  - title: '<b>Mark duplicates</b>'
    element: '#tool-search-query'
    content: 'To finally, mark PCR or optical duplicates, look for <b>Samtools markdup</b>.<br /><br />'
    placement: right
    textinsert: samtools markdup
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fsamtools_markdup%2Fsamtools_markdup%2F1.9%2Bgalaxy2"]

  - title: '<b>Mark duplicates</b>'
    element: 'div[tour_id="bamfile"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="bamfile"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Mark duplicates</b>'
    element: 'div[tour_id="bamfile"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>tagged.treat</b></text>'
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: 'div[tour_id="maxlen"]'
    placement: top
    content: 'According to our input dataset<br /><text style="color:red">Enter: <b>100</b></text>'
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Mark duplicates</b>'
    element: '#right'
    content: 'Mark duplicates by Samtools has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Samtools markdup")'



# wait and tag



  - title: '<b>Mark duplicates</b>'
    element: '#masthead'
    content: 'Masking optical duplicates has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-queued'
        count: 0

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (1/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>dupmarked.treat</b></text>'
    placement: top
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (2/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>dupmarked.ctr</b></text>'
    placement: top
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'




# coordinate sort alignment



  - title: '<b>Sort properly paired sequences</b>'
    element: '#tool-search-query'
    content: 'Again, look for <b>Samtools sort</b> to sort alignments by coordinate.<br /><br />'
    placement: right
    textinsert: samtools sort
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtools_sort%2Fsamtools_sort%2F2.0.3"]

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="input1"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>dupmarked.ctr</b></text>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'


  - title: '<b>Sort properly paired sequences</b>'
    element: '#right'
    content: 'Samtools sort processing has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Samtools sort")'



# redo for treat



  - title: '<b>Sort properly paired sequences</b>'
    element: '#tool-search-query'
    content: 'Meanwhile apply Samtools sort by coordinate on treatment samples<br />'
    placement: right
    textinsert: samtools sort
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtools_sort%2Fsamtools_sort%2F2.0.3"]

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="input1"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Sort properly paired sequences</b>'
    element: 'div[tour_id="input1"]'
    placement: bottom
    content: '<text style="color:red">Select: <b>dupmarked.treat</b></text>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'


  - title: '<b>Sort properly paired sequences</b>'
    element: '#right'
    content: 'Samtools sort processing has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Samtools sort")'



# wait and tag



  - title: '<b>Sort properly paired sequences</b>'
    element: '#masthead'
    content: 'Sorting the masked alignments has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-queued'
        count: 0

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (1/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>coordsorted.treat</b></text>'
    placement: top
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (2/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>coordsorted.ctr</b></text>'
    placement: top
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'




# methyldackel



  - title: '<b>Infer methylation of CpGs</b>'
    element: '#tool-search-query'
    content: 'Look for <b>MethylDackel</b>.<br /><br />'
    placement: right
    textinsert: methyldackel
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fbgruening%2Fpileometh%2Fpileometh%2F0.3.0.1"]

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="reference_source|reference_source_selector"]'
    content: '<text style="color:red">Select: <b>History</b></text>'
    placement: bottom
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="input_sortedAlignBAM"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="input_sortedAlignBAM"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="input_sortedAlignBAM"]'
    placement: top
    content: '<text style="color:red">Select: <b>coordsorted.ctr</b></text>'
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="main_task|mergeContext"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton'
    content: 'Report a single methylation rate per CpG inferred from both strands instead of two.<br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="main_task|mergeContext"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton > :nth-child(1)'

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|options"]'
    placement: top
    content: 'In case of RRBS data and because of already properly postprocessed input alignments, some additional options need to be adapted.<br /><text style="color:red">Select: <b>Display advanced options</b></text>'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|keepDupes"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton'
    content: '<b>Only in case of RRBS data sets</b>, ignore duplicons. Similar to RNA-Seq, fragment enrichment methods lead to true optical duplicons. Thus removal may cause up to 50% data loss.<br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="advanced_options|keepDupes"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton > :nth-child(1)'


  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|min_mapq"]'
    placement: top
    content: 'Due to properly postprocessed alignments and in favor of true alignments with mapping quality below 10<br /><text style="color:red">Enter: <b>0</b></text>'
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|CHG"]'
    placement: top
    content: 'Switch to Yes in case of extended context methylation inference.<br />Default: No'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|ignoreFlags"]'
    placement: top
    content: 'Due to properly postprocessed alignments and to not override previously altered duplicon settings<br /><text style="color:red">Enter: <b>0</b></text>'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: '#execute'
    content: 'For all remaining parametrization options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />
Click <b>Next</b> to execute.<br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#right'
    content: 'Methylation rate inference has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("MethylDackel")'



# redo for treat



  - title: '<b>Infer methylation of CpGs</b>'
    element: '#tool-search-query'
    content: 'Meanwhile predict methylation rates for treatment samples, thus start <b>MethylDackel</b> again.<br /><br />'
    placement: right
    textinsert: methyldackel
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fbgruening%2Fpileometh%2Fpileometh%2F0.3.0.1"]

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="reference_source|reference_source_selector"]'
    content: '<text style="color:red">Select: <b>History</b></text>'
    placement: bottom
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="input_sortedAlignBAM"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="input_sortedAlignBAM"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="input_sortedAlignBAM"]'
    placement: top
    content: '<text style="color:red">Select: <b>coordsorted.treat</b></text>'
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="main_task|mergeContext"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton'
    content: 'Report a single methylation rate per CpG inferred from both strands instead of two.<br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="main_task|mergeContext"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton > :nth-child(1)'

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|options"]'
    placement: top
    content: 'In case of RRBS data and because of already properly postprocessed input alignments, some additional options need to be adapted.<br /><text style="color:red">Select: <b>Display advanced options</b></text>'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|keepDupes"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton'
    content: '<b>Only in case of RRBS data sets</b>, ignore duplicons. Similar to RNA-Seq, fragment enrichment methods lead to true optical duplicons. Thus removal may cause up to 50% data loss.<br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="advanced_options|keepDupes"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton > :nth-child(1)'


  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|min_mapq"]'
    placement: top
    content: 'Due to properly postprocessed alignments and in favor of true alignments with mapping quality below 10<br /><text style="color:red">Enter: <b>0</b></text>'
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|CHG"]'
    placement: top
    content: 'Switch to Yes in case of extended context methylation inference.<br />Default: No'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: 'div[tour_id="advanced_options|ignoreFlags"]'
    placement: top
    content: 'Due to properly postprocessed alignments and to not override previously altered duplicon settings<br /><text style="color:red">Enter: <b>0</b></text>'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: '#execute'
    content: 'For all remaining parametrization options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />
Click <b>Next</b> to execute.<br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#right'
    content: 'Methylation rate inference has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("MethylDackel")'



# wait and tag



  - title: '<b>Infer methylation of CpGs</b>'
    element: '#masthead'
    content: 'Methylation rate inference has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-queued'
        count: 0

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (1/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>methrates.treat</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (2/2).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(2) > .title-bar > .title'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>methrates.ctr</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'



# bedtools intersect



  - title: '<b>Infer promoter methylation level</b>'
    element: '#tool-search-query'
    content: 'To extract CpG methylation of gene upstream regions, look for <b>bedtools intersect</b>.<br /><br />'
    placement: right
    textinsert: bedtools intersect
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fbedtools%2Fbedtools_intersectbed%2F2.27.1%2Bgalaxy1"]

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="inputA"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'
    content: 'Switch to multiple dataset view<br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="inputA"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="inputA"] > .ui-form-field > .ui-select-content > .ui-select-multiple.ui-select'
    content: 'Select the promoter aka upstream regions file<br /><br />'
    placement: bottom
    select:
      - 'div[tour_id="inputA"] > .ui-form-field > .ui-select-content > .ui-select-multiple.ui-select > .select > option:contains("promoter.bed")'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="reduce_or_iterate|reduce_or_iterate_selector"]'
    content: '<text style="color:red">Select: <b>Single output containing intersections of an input B</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="reduce_or_iterate|inputB"]:last > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="reduce_or_iterate|inputB"]:last > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="reduce_or_iterate|inputB"]:last'
    content: 'Backtrack and select control dataset collection.<br /><br />'
    placement: top
    select:
      - 'div[tour_id="reduce_or_iterate|inputB"]:last > .ui-form-field > .ui-select-content > .ui-select-multiple.ui-select > .select > :nth-child(2)'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="overlap_mode"] > .ui-form-field'
    content: '<text style="color:red">Click into field and select last entry: <b>Perform a left outer join</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="sorted"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton'
    content: 'Assume sorted input to speedup intersection.'
    placement: top
    onnextclick:
      - 'div[tour_id="sorted"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton > :nth-child(1)'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#right'
    content: 'Intersection has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("bedtools Intersect")'



# redo for treat



  - title: '<b>Infer promoter methylation level</b>'
    element: '#tool-search-query'
    content: 'Meanwhile extract CpG methylation of gene upstream regions for treatment samples, thus look again for <b>bedtools intersect</b>.<br /><br />'
    placement: right
    textinsert: bedtools intersect
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fbedtools%2Fbedtools_intersectbed%2F2.27.1%2Bgalaxy1"]

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="inputA"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'
    content: 'Switch to multiple dataset view<br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="inputA"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="inputA"] > .ui-form-field > .ui-select-content > .ui-select-multiple.ui-select'
    content: 'Select the promoter aka upstream regions file<br /><br />'
    placement: bottom
    select:
      - 'div[tour_id="inputA"] > .ui-form-field > .ui-select-content > .ui-select-multiple.ui-select > .select > option:contains("promoter.bed")'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="reduce_or_iterate|reduce_or_iterate_selector"]'
    content: '<text style="color:red">Select: <b>Single output containing intersections of an input B</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="reduce_or_iterate|inputB"]:last > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="reduce_or_iterate|inputB"]:last > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="reduce_or_iterate|inputB"]:last'
    content: 'Backtrack and select treatment dataset collection.<br /><br />'
    placement: top
    select:
      - 'div[tour_id="reduce_or_iterate|inputB"]:last > .ui-form-field > .ui-select-content > .ui-select-multiple.ui-select > .select > :nth-child(1)'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="overlap_mode"] > .ui-form-field'
    content: '<text style="color:red">Click into field and select last entry: <b>Perform a left outer join</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="sorted"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton'
    content: 'Assume sorted input to speedup intersection.'
    placement: top
    onnextclick:
      - 'div[tour_id="sorted"] > .ui-form-field > .ui-options > .btn-group.ui-radiobutton > :nth-child(1)'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#right'
    content: 'Intersection has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("bedtools Intersect")'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#masthead'
    content: 'Intersection with upstream regions has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-queued'
        count: 0


# bedtools merge



  - title: '<b>Infer promoter methylation level</b>'
    element: '#tool-search-query'
    content: 'Look for <b>bedtools merge</b> to calculate mean methylation levels.<br /><br />'
    placement: right
    textinsert: bedtools mergebed
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fbedtools%2Fbedtools_mergebed%2F2.27.1"]

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="input"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'
    content: 'Select multiple datasets.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="input"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(2)'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="input"]'
    content: 'Select both, control and treated intersection datasets.<br /><br />'
    placement: bottom
    select:
      - 'div[tour_id="input"] > .ui-form-field > .ui-select-content > .ui-select-multiple.ui-select > .select > :nth-child(-n+2)'



  - title: '<b>Infer promoter methylation level</b>'
    element: '.float-none'
    content: 'Add a rule which keeps the gene ID information.'
    placement: top
    onnextclick:
      - '.float-none'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="c_and_o_argument_repeat_0|col"]'
    content: '<text style="color:red">To keep the gene ID select: <b>Column 4</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="c_and_o_argument_repeat_0|operation"]'
    content: '<text style="color:red">Scroll down and select: <b>distinct</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: '.float-none'
    content: 'Add a rule which keeps the gene ID information.'
    placement: top
    onnextclick:
      - '.float-none'

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="c_and_o_argument_repeat_1|col"]'
    content: '<text style="color:red">To keep and mean the methylation rates, scroll down and <br />select: <b>Column 9</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: 'div[tour_id="c_and_o_argument_repeat_1|operation"]'
    content: '<text style="color:red">Select: <b>Mean</b></text>'
    placement: top
    pointer: true


  - title: '<b>Infer promoter methylation level</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#right'
    content: 'Merging data tables and mean methylation calculation has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Merged")'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#masthead'
    content: 'Mean methylation calculation has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-queued'
        count: 0

  - title: '<b>Infer log2 fold-change</b>'
    element: '#tool-search-query'
    content: 'Look for <b>Join two files</b>.<br /><br />'
    placement: right
    textinsert: join two files
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fbgruening%2Ftext_processing%2Ftp_easyjoin_tool%2F1.1.1"]

  - title: '<b>Infer log2 fold-change</b>'
    element: 'div[tour_id="infile1"]'
    content: '<text style="color:red">Backtrack and select <b>the second merged dataset</b> i.e. the control data</text>'
    placement: bottom
    pointer: true

  - title: '<b>Infer log2 fold-change</b>'
    element: 'div[tour_id="column1"]'
    content: '<text style="color:red">Select the unique start position: <b>Column 2</b></text>'
    placement: bottom
    pointer: true

  - title: '<b>Infer log2 fold-change</b>'
    element: 'div[tour_id="column2"]'
    content: '<text style="color:red">Select the unique start position: <b>Column 2</b></text>'
    placement: bottom
    pointer: true


  - title: '<b>Infer log2 fold-change</b>'
    element: '#execute'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Infer log2 fold-change</b>'
    element: '#right'
    content: 'Joining tables has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Join")'

  - title: '<b>Infer log2 fold-change</b>'
    element: '#masthead'
    content: 'Joining has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-queued'
        count: 0




# awk log2fc



  - title: '<b>Infer log2 fold-change</b>'
    element: '#tool-search-query'
    content: 'Look for <b>Text reformatting with awk</b>.<br /><br />'
    placement: right
    textinsert: text reformatting
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fbgruening%2Ftext_processing%2Ftp_awk_tool%2F1.1.1"]

  - title: '<b>Infer log2 fold-change</b>'
    element: 'div[tour_id="code"]'
    content: '<text style="color:red">Enter:<br /><b>BEGIN{print "gene_id\tctr_methrate\ttreat_methrate\tlog2fc"}{print $4"\t"$5"\t"$9"\t"($5 < $9 ? (log($9+1)-log($5+1))/log(2) : -(log($5+1)-log($9+1))/log(2))}</b></text>'
    placement: top
    pointer: true

  - title: '<b>Infer log2 fold-change</b>'
    element: '#execute'
    content: 'Extract methylation columns and calculate log2 fold-change.<br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Infer log2 fold-change</b>'
    element: '#right'
    content: 'Log2 fold-change calculation has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br /><br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Text reformatting")'


  - title: '<b>Infer log2 fold-change</b>'
    element: '#masthead'
    content: 'Log2 fold-change calculation has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset.history-content.state-queued'
        count: 0

  - title: '<b>Infer log2 fold-change</b>'
    element: '#masthead'
    content: 'You successfully completed this Galaxy atom<br />'
    placement: bottom
