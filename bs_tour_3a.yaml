id: bs_tour_3a
name: 'BS-Seq analysis'
description: 'Quality trimming with Trimmomatic'
title_default: 'BS-Seq analysis'
steps:
  - title: '<b>Outline</b>'
    element: '#masthead'
    content: 'In this tour, we will perform quality trimming on BS-Seq data to remove low quality sequence content from sequencing reads that might ultimately bias the interpretation of results.<br />
Here, we will leverage on <b>Cutadapt</b>.<br />'
    position: bottom

  - title: '<b>Quality trimming</b>'
    element: '#tool-search-query'
    content: 'Look for the <b>Trimmomatic</b> tool.<br />
Trimmomatic is an adapter/sequence trim/removal tool, which searches for contaminants, adapters, and low quality score reads, and ultimately removes them to improve the overall quality of the input datasets.<br /><br />'
    placement: right
    textinsert: trimmomatic
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fpjbriggs%2Ftrimmomatic%2Ftrimmomatic%2F0.38.0"]

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|single_or_paired"]'
    content: '<text style="color:red">Select: <b>Paired-end (two seperate input files)</b></text>'
    pointer: true
    placement: bottom

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|fastq_r1_in"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="readtype|fastq_r1_in"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|fastq_r1_in"]'
    content: '<text style="color:red">Select: <b>noadapter.ctr.R1</b></text>'
    pointer: true
    placement: bottom

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|fastq_r2_in"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="readtype|fastq_r2_in"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|fastq_r2_in"]'
    content: '<text style="color:red">Select: <b>noadapter.ctr.R2</b></text>'
    pointer: true
    placement: bottom

  - title: '<b>Quality trimming</b>'
    element: '.float-none'
    content: 'Next to the SLIDINGWINDOW operation, which performs an iterative scanning of the sequence, trimming once the average quality falls below a threshold of 20, Trimmomatic needs to be further parameterized.<br />'
    placement: top
    onnextclick:
      - '.float-none'

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="operations_1|operation|name"]'
    content: '<text style="color:red">Select: <b>MINLEN</b></text><br />The MINLEN operation drops all sequences whose lenght falls below the provided threshold. A minimum read length of 20 indicates enough sequence information content for downstream analyses. <br />'
    placement: top
    pointer: true

  - title: '<b>Quality trimming</b>'
    element: '#execute'
    content: 'With the current parametrisation, Trimmomatic will:<br />
- Trim reads with low average quality<br />
- Discard reads whose length became shorter than 20 bp.<br />
For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Quality trimming</b>'
    element: '#right'
    content: 'Trimmomatic processing has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Trimmomatic")'


# redo for treat



  - title: '<b>Quality trimming</b>'
    element: '#tool-search-query'
    content: 'Meanwhile trim low quality score read sequences of the treatment datasets.<br /><br />'
    placement: right
    textinsert: trimmomatic
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fpjbriggs%2Ftrimmomatic%2Ftrimmomatic%2F0.38.0"]

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|single_or_paired"]'
    content: '<text style="color:red">Select: <b>Paired-end (two seperate input files)</b></text>'
    pointer: true
    placement: bottom

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|fastq_r1_in"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="readtype|fastq_r1_in"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|fastq_r1_in"]'
    content: '<text style="color:red">Select: <b>noadapter.treat.R1</b></text>'
    pointer: true
    placement: bottom

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|fastq_r2_in"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'
    content: 'Select dataset collection.<br /><br />'
    placement: bottom
    onnextclick:
      - 'div[tour_id="readtype|fastq_r2_in"] > .ui-form-field > .ui-select-content > .ui-options > .btn-group.ui-radiobutton > :nth-child(3)'

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="readtype|fastq_r2_in"]'
    content: '<text style="color:red">Select: <b>noadapter.treat.R2</b></text>'
    pointer: true
    placement: bottom

  - title: '<b>Quality trimming</b>'
    element: '.float-none'
    content: 'Next to the SLIDINGWINDOW operation, which performs an iterative scanning of the sequence, trimming once the average quality falls below a threshold of 20, Trimmomatic needs to be further parameterized.<br />'
    placement: top
    onnextclick:
      - '.float-none'

  - title: '<b>Quality trimming</b>'
    element: 'div[tour_id="operations_1|operation|name"]'
    content: '<text style="color:red">Select: <b>MINLEN</b></text><br />The MINLEN operation drops all sequences whose lenght falls below the provided threshold. A minimum read length of 20 indicates enough sequence information content for downstream analyses. <br />'
    placement: top
    pointer: true

  - title: '<b>Quality trimming</b>'
    element: '#execute'
    content: 'With the current parametrisation, Trimmomatic will:<br />
- Trim reads with low average quality<br />
- Discard reads whose length became shorter than 20 bp.<br />
For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.<br /><br />'
    placement: top
    postclick:
      - '#execute'

  - title: '<b>Quality trimming</b>'
    element: '#right'
    content: 'Trimmomatic processing has begun, and the results are loading in your history.<br />
Results are available as soon as their entries turn green.<br />'
    placement: left
    onloadwait:
      - element: '#current-history-panel > .list-items > :nth-child(1) > .title-bar > .title > span:contains("Trimmomatic")'


# wait and tag


  - title: '<b>Quality trimming</b>'
    element: '#masthead'
    content: 'The quality control and data preprocessing analysis has been completed.<br />'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-loading'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-new'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-running'
        count: 0
      - element: '#current-history-panel > .list-items > .list-item.dataset-collection.history-content.state-queued'
        count: 0


  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-items > :nth-child(3) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (1/4).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(3) > .title-bar > .title'

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>trimmed.treat.R2</b></text>'
    placement: top
    pointer: true

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-items > :nth-child(4) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (2/4).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(4) > .title-bar > .title'

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>trimmed.treat.R1</b></text>'
    placement: top
    pointer: true

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-items > :nth-child(7) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (3/4).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(7) > .title-bar > .title'

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>trimmed.ctr.R2</b></text>'
    placement: top
    pointer: true

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-items > :nth-child(8) > .title-bar > .title'
    content: 'To keep track of the data being processed, we will use tags (4/4).<br />'
    placement: top
    onnextclick:
      - '#current-history-panel > .list-items > :nth-child(8) > .title-bar > .title'

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-panel > .controls > .tags-display'
    content: '<text style="color:red">Enter and confirm by return keypress: <b>trimmed.ctr.R1</b></text>'
    placement: top
    pointer: true

  - title: '<b>Adapter clipping</b>'
    element: '#current-history-panel > .list-panel > .controls > .navigation > .back'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel > .list-panel > .controls > .navigation > .back'

  - title: '<b>Quality trimming</b>'
    element: '#masthead'
    content: 'You successfully completed this Galaxy atom<br />'
    placement: bottom

